---
title: 11. Python 网络爬虫与信息提取
date: 2018-03-18 19:50:53
updated: 2022-11-05 09:48:00
categories:
  - 语言
  - Python
tags: python
---

![](https://upload-images.jianshu.io/upload_images/1662509-4c2d897b87504fcb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

## Requests 的安装

```sh
# 1. 找到 python 安装路径:
C:\Users\hp\AppData\Local\Programs\Python\Python35\Scripts`
# 2. cmd命令执行
pip install requests
```

![Requests 库的七个主要方法](https://upload-images.jianshu.io/upload_images/1662509-4ea1f3a2aa5deec5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

#### get方法

`requests.get(url, params=None, **kwargs)`

* url : 拟获取页面的 url 链接
* params : url 中的额外参数，字典或字节流格式，可选
* **kwargs: 12 个控制访问的参数

<!-- more -->

![Response 对象的属性](https://upload-images.jianshu.io/upload_images/1662509-7bd8fc91c80c94d9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
![](https://upload-images.jianshu.io/upload_images/1662509-ca5a975f64f621d4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

![理解 Requests 库的异常](https://upload-images.jianshu.io/upload_images/1662509-32b09206e8191917.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

![](https://upload-images.jianshu.io/upload_images/1662509-d1390251e630e75c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

> `response.raise_for_status()` 在方法内部判断 r.status_code 是否等于 200，不需要
增加额外的if语句，该语句便于利用 try‐except 进行异常处理

![Requests 库的 7 个主要方法](https://upload-images.jianshu.io/upload_images/1662509-b8bb7703ec30c5ac.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

![HTTP 协议对资源的操作](https://upload-images.jianshu.io/upload_images/1662509-58afed719b3938b6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

#### 爬取网页的通用代码框架

```py
import requests

def getHTMLText(url):
    try:
        # 模拟正常浏览器请求头
        kv = {'User-Agent':'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.132'}
        response = requests.get(url, timeout = 10, headers = kv)
        response.raise_for_status()
        response.encoding = response.apparent_encoding
        return response.text
    except:
        return "产生 HTTPError"
```
