---
title: 17. 通信系统架构设计理论与实践
date: 2025-10-05 10:20:00
updated: 2025-10-05 10:20:00
categories: [系统架构设计师]
---

## 1 通信系统概述

通信系统(也称为通信网络)是利用各种通信线路将地理上分散的、具有独立功能的计算机系统和通信设备按不同的形式连接起来，依靠网络软件及通信协议实现资源共享和信息传递的系统。本文主要介绍通信系统的 5 种常用的网络架构和构建网络的相关技术，以及网络构建的分析和设计方法。

## 2 通信系统网络架构

### 2.1 局域网网络架构

#### 2.1.1 概述

局域网（Local Area Network, LAN）是一种为单一机构所拥有的专用计算机网络。其特点包括：

- 地理范围小
- 数据传输速率高
- 可靠性高

局域网通常由计算机、交换机、路由器等设备组成。<!-- more -->

就网络拓扑而言，有总线型、环型、星型、树型等型式。
从传输介质来说，包含有线局域网和无线局域网。

#### 2.1.2 网络组成

局域网通常由计算机、交换机、路由器等设备组成。

#### 2.1.3 网络架构

##### 2.1.3.1 单核心架构

单核心局域网通常由一台核心二层或三层交换设备充当网络的核心设备。
用单核心构建网络，其优点是：网络结构简单，可节省设备投资。

##### 2.1.3.2 双核心架构

双核心架构通常是指核心交换设备通常采用三层及以上交换机。核心交换设备和接入设备之间可采用 100M/GE/10GE 等以太网连接。网络内划分VLAN时，各VLAN 之间访问需通过两台核心交换设备来完成。网络中仅核心交换设备具备路由功能，接入设备仅提供二层转发功能。

##### 2.1.3.3 环型架构

环型局域网是由多台核心交换设备连接成双 RPR(Resilient Packet Ring) 动态弹性分组环，构建网络的核心。核心交换设备通常采用三层或以上交换机提供业务转发功能。

##### 2.1.3.4 层次架构

层次局域网(或多层局域网)由核心层交换设备、汇聚层交换设备和接入层交换设备，以及用户设备等组成。

层次局域网网络拓扑易于扩展。网络故障可分级排查，便于维护。通常，层次局域网通过与广域网的边界路由设备接入广域网，实现局域网和广域网业务互访。

#### 2.1.4 网络协议的应用

- 网络中互为主力的交换或路由设备之间采用必要保护协议：如 VRRP、LSP、GLBP 等。
- 网络中二层网络采用多链路机制进行链路保护或负载均衡时采用 STP、LACP 等协议。
- 网络中三层设备实现网络动态路由控制的路由协议 OSPF、RIP、BGP 等。

### 2.2 广域网网络架构

#### 2.2.1 概述

广域网是将分布于相比局域网更广区域的计算机网络连接起来的网络。广域网由骨干网与接入网组成，通信可以利用分组交换网、分组传送网和无线分组交换网等技术构建，将分布在不同地区的局域网或计算机系统互连起来，实现资源子网的共享。

#### 2.2.2 网络组成

广域网属于多级网络，通常由骨干网、分布网、接入网组成。在网络规模较小时，可以由骨干网和接入网组成。

#### 2.2.3 网络架构

##### 2.2.3.1 单核心广域网

- 单核心广域网通常由一台核心二层或三层交换设备充当网络的核心设备。
- 该类型网络结构简单，节省设备投资。各局域网访问核心局域网，以及相互访问效率高。

##### 2.2.3.2 双核心广域网

双核心广域网通常由两台核心路由设备和各局域网组成。

##### 2.2.3.3 环型广域网

- 环型广域网是采用三层以上核心路由器设备构成路由环型网络，实现“域间业务互通”。
- 设备投资比双核心广域网高，核心路由设备路由冗余设计实施难度较高，容易形成路由环路。环型拓扑结构需要占用较多端口，网络对核心路由设备端口密度要求较高。

##### 2.2.3.4 半冗余广域网

半冗余广域网是由多台核心路由设备连接各局域网而形成的。其典型网络架构。其中，任意核心路由设备至少存在两条以上连接至其他路由设备的链路。如果任何两个核心路由设备之间均存在链接，则属于半冗余广域网特例，即全冗余广域网。

##### 2.2.3.5 对等子域广域网

* 对等子域广域网是将广域网的路由设备划分成两个独立的子域。
* 对等子域广域网的主要特征是对等子域之间的互访是以对等子域之间互连链路为主。

##### 2.2.3.6 层次子域广域网

层次子域广域网结构是将大型广域网路由设备划分成多个较为独立的子域，每个子域内路由设备采用半冗余方式互连，多个子域之间存在层次关系，高层次子域连接多个低层次子域。层次子域中任何路由设备都可以接入局域网。

### 2.3 移动通信信道网络架构

#### 2.3.1 5G 与 DN 互连

- 5GS (5G System) 在为移动终端用户 (User Equipment, UE) 提供服务时通常需要 DN (Data Network) 网络，如 Internet、DMS (IP Media Subsystem)、专用网络等互连来为 UE 提供所需的业务。

从 UE 通过 5GS 接入 DN 的方式来说，存在两种模式，即透明模式和非透明模式。

- 透明模式下，5G S 通过 N6 接口直接连至运营商特定的 IP 网络。
- 非透明模式下，5G S 可直接接入 Intranet/ISP，或通过其他IP网络(如Internet) 接入Intranet/ISP。

#### 2.3.2 5G 网络边缘计算

- 5G 网络改变以往以设备、业务为中心的导向，倡导以用户为中心的理念。
- 5G 网络边缘计算能力的提供正是为垂直行业赋能、提升用户的服务体验QoE(Quality of Experience) 的重要举措之一。

### 2.4 存储网络架构

一般来说，计算机访问磁盘存储有 3 种方式：

- 直连式存储(Direct Attached Storage,DAS): 计算机通过I/O端口直接访问存储设备的方式。
- 网络连接的存储 (Network Attached Storage,NAS): 计算机通过分布式文件系统访问存储设备的方式。
- 存储区域网络 (Storage Area Network,SAN): 计算机通过构建的独立存储网络访问存储设备的方式。

DAS 采用 I/O 总线架构，如 IDE 或 ATA 等将存储设备挂接在计算机中，实现数据存储。

#### 2.4.1 网络连接存储（NAS）

- NAS 设备是一种专用存储系统，用户计算机通过网络远程访问。
- NAS 存储通常采用 RPC 接口软件实现。

#### 2.4.2 存储区域网络（SAN）

- SAN 是企业最常用的存储网络架构。
- SAN 通过专用网络协议连接服务器和存储单元。

#### 2.4.3 NAS 与 SAN 异同点

- NAS 基于以太网，而 SAN 则基于光纤通道。
- NAS 管理性、易用性、可扩展性、可靠性和总拥有成本（TCO）高。
- SAN 则注重高性能和低延时。

### 2.5 软件定义网络架构

#### 2.5.1 软件定义网络

- 软件定义网络（SDN）是由美国斯坦福大学Clean Slate 课题组提出的一种新型网络创新架构。
- SDN 技术能够更有效降低转发设备复杂度及卸载不必要的运行负载，同时打破了传统网络设备的封闭性。

#### 2.5.2 SDN 网络架构

- SDN 架构由上至下为数据平面、控制平面和应用平面。
- 数据平面由通用硬件构成，控制平面包含了逻辑上为中心的 SDN 控制器，应用平面包含各种基于 SDN 的网络应用。

## 3 网络构建关键技术

### 3.1 网络高可用设计

#### 3.1.1 网络高可用性概述

网络高可用性是网络设计时需高度重视的问题，衡量网络高可用性的主要指标是可用性 (Availability)，可以表示为：$A = MTBF(MTBF + MTTR)$

提高网络可用性，提高 MTBF，降低 MTTR 都是行之有效的方法。

#### 3.1.2 网络高可用性架构

- 网络高可用性是一个系统级的概念，由网络元素（或网络部件）的高可用性决定。
- 网络部件是组成网络的基本要素，构成网络的部件的可用性，以及连接模型的可用性就决定了网络的可用性程度。

##### 3.1.2.1 网络部件

- 网络部件是组成网络的基本要素，典型代表有各种交换机、路由器等网络设备。
- 网络部件的高可用性是网络高可用性的关键。

##### 3.1.2.2 网络连接模型

- 网络物理拓扑连接形式影响网络的可用性程度。

##### 3.1.2.3 网络协议及配置

- 高可用性离不开网络中的路由、链路检测等协议。
- 在网络部署中，以基本路由协议如 OSPF/BGP 等为主。
- 另外，提升网络可靠性的协议还包括 802.3ad、VRRP、 路由多下一跳等。

### 3.2 IPv4 与 IPv6 融合组网技术

面对 IPv4 网络巨大的投资成本，以及大量应用仍基于 IPv4 协议开发并提供业务的现状，网络演进还存在较长时间 IPv4 到 IPv6 过渡期或 IPv4 和 IPv6 网络共存期。为此，国际标准组织为应对这段较长时间过渡期，形成了相关的过渡技术标准。目前主要存在三种过渡技术：双协议栈、隧道技术、地址翻译机制。

### 3.2.1 双协议栈

- IPv4/IPv6 双协议栈机制使 IPv6 网络设备有一个 IPv6 协议栈和一个 IPv4 协议栈，同时支持 IPv4 和 IPv6 协议的处理。
- IPv6 和 IPv4 是功能相近的网络层协议，两者均运行于同一物理平台，并均可承载相同的传输层协议 TCP、UDP 等。

### 3.2.2 隧道技术

- 隧道技术是 IPv4 和 IPv6 融合组网时通常采用的一种过渡技术。
- 隧道技术允许 IPv6 数据包通过 IPv4 网络上以点对点传输。

#### 3.2.2.1 ISATAP 隧道

- ISATAP 是一种 IPv6 转换传输机制，允许 IPv6 数据包通过 IPv4 网络上以点对点传输。 ISATAP将IPv4网络作为一个非广播多路访问网络
的数据链路层，但不需要底层IPv4网络支持多播工作方式。

#### 3.2.2.2 6to4 隧道

- 6to4 隧道是在站点之间进行 IPv6 通信时，每个站点应至少部署一台 6to4 路由器作为入口。
- 6to4 路由器必须同时具备 6to4 接口和 IPv6 接口，并提供这两种接口之间的封装解封装和转发功能。

#### 3.2.2.3 4over6 隧道

- 覆盖 IPv6 是 IPv4 over IPv6 的简称，是 IPv4 网络向 IPv6 网络过渡过程中的第二种过渡技术。

#### 3.2.2.4 6over4 隧道

6over4 隧道技术提供一种转发机制，使得双栈节点之间在组播使能的 IPv4 网络中传送 IPv6 分组。即它在用于承载的 IPv4 网络建立的虚拟数据链路层(虚拟以太网)上供 IPv6 协议传送分组数据。

### 3.2.3 网络地址翻译技术

- 网络地址翻译技术将 IPv4 地址和 IPv6 地址分别映射到内部地址和外部地址，以实现地址转换。
- 内部的 IPv4 主机要和外部 IPv6 主机通信时，在 NAT 服务器中将 IPv4 地址 (内部地址) 变换成 IPv6 地址 (对外地址)。

### 3.3 SDN 技术

SDN 网络在控制平面和转发平面分别采用了不同技术，以满足 SDN 网络控制的全局性和灵活性，业务转发的高效性及高性价比要求。

#### 3.3.1 控制平面技术

通常存在两种控制器扩展方式：一种是对网络中单一控制器本身进行扩展，另一种是采用多控制器方式。

- 单一集中式结构的控制器，一般采用了多线程的方式对控制器进行性能提升。
- 扩展控制器一般采用两种模型：扁平控制模型和层次化控制模型。

#### 3.3.2 数据平面技术

SDN 转发设备(如交换机等)的数据转发形态可分为硬件和软件两种。

- 硬件处理方式相比软件处理方式具有更快的速度，但灵活性有所降低。
- 软件的处理速度低于硬件，但软件方式可以提升转发规则处理的灵活性。

#### 3.3.3 转发表规则一致性更新技术

在 SDN 网络中不同转发设备转发规则更新可能会出现不一致现象。针对这种问题一般采用“两段提交”的方式来更新规则。

## 4 网络构建和设计方法

### 4.1 网络需求分析

网络需求分析是网络构建及开发过程的起始环节，也是极其重要的阶段。通过对网络需求分析，可为后续网络设计提供以下依据：

- 更准确地评价现有网络体系；
- 更客观做出建网决策；
- 提供的网络交互功能更贴近用户；
- 更好地进行网络功能移植；
- 合理使用用户资源等。

需求分析过程，主要围绕以下几个方面来开展：

1. 业务需求：调查和理解业务本质，尽可能保证设计的网络满足业务的需求。
2. 用户需求：收集用户需求，从用户描述的碎片化、模糊的、难以量化的需求中分析提取用户的真实需求。
3. 应用需求：考虑应用类型和地点、使用方法、需求增长性、可靠性和可用性要求等。
4. 计算机平台需求：明确网络所接入的设备类型。
5. 网络需求：考虑网络管理员的需求。

通过上述 5 个需求分析后，最终形成约束后续网络设计的网络需求规格说明书。

### 4.2 网络技术选型及设计

#### 4.2.1 局域网技术遴选

- 生成树协议 (Spanning Tree Protocol, STP)
- 虚拟局域网 (VLAN)
- 无线局域网
- 线路冗余设计
- 交换设备功能的合理使用
- 服务器冗余设计

#### 4.2.2 广域网技术选型

- 远程接入技术
- 广域网互连技术

#### 4.2.3 地址规划模型

地址规划分配，是网络管理工作的重点内容。合理的地址规划不仅为网络管理带来便利，也有利于路由协议的收敛。地址分配应遵循以下原则：

1. 使用结构化网络层编址模型，即对地址进行层次化的规划。
1. 通过中心授权机构管理地址，比如由组织的 IT 部门为网络层编址提供一个全局模型。根据网络的核心、汇聚、接入层次化结构，为组织的各个区域、分支机构等进行地址规划。
1. 编址授权下发。即由地址授权管理中心，将编址授权给分支机构来进行地址规划。
1. 为终端用户设备指派动态地址，即对于频繁变更位置、移动性角度的用户分配动态地址。
1. 私有地址合理使用。使用私有地址在组织内互访具有很高安全性，避免来自外部网络攻击。使用私有地址的用户在访问外部网络，需要进行地址转换 (NAT), 因此，还需要做好 NAT 地址池的规划

#### 4.2.4 路由协议选择

路由协议选择包括以下内容：

1. 路由协议类型的选择：路由协议选择主要包括距离矢量协议和链路状态协议。
1. 路由选择协议度量值的合理设置。
1. 路由选择协议顺序的合理指定。
1. 层次化与非层次化路由选择协议。
1. 内部与外部路由选择协议。
1. 分类与无类路由选择协议。
1. 静态路由指定。

#### 4.2.5 层次化网络模型设计

层次化网络设计模型，可帮助设计者按照层次设计网络架构，并对不同层次赋予特定网络功能，选择适合的设备/系统。在典型层次化网络结构中：

* 核心层通常选用具备高可用性和性能优化的高端路由器/交换机；
* 汇聚层通常选取实现策略的路由器和交换机；
* 接入层通常选用低端交换机连接用户设备。

#### 4.2.6 网络高可用设计方法

在进行网络设计时，必然需要面对网络的可用性 (Availability) 和可靠性 (Reliability) 问题。它们是衡量一个网络好坏的重要指标。可靠性指的是网络连续无故障运行时间的长短，无故障运行时间越长，可靠性越高；可用性指的是，在较长时间(比如一年等)里网络可用的时间长短，可用时间越长，可用性越高。

**提高网络可用性的途径**

1. 提高网络可靠性，影响可靠性的因素很多，包括硬件、软件、运维、环境等。
1. 缩短网络恢复时间，一旦网络出现故障，如能在秒级，甚至毫秒级得以恢复，那么对业务影响则很小。

**设计的核心思想**

网络系统可靠性/可用性设计的核心思想是通过合理设计组网结构和应用可靠性特性，使得网络系统软件硬件部件运行可靠，具备冗余备份、自动检测和快速恢复机制，同时也应权衡不同类型网络构建成本。

**设计原则**

网络可靠性/可用性设计原则：不同的网络、服务的业务场景不尽相同，其可靠性/可用性设计目标也不同。网络解决方案需要根据实际需求进行设计。

### 4.3 网络安全

#### 4.3.1 防火墙布设

防火墙是设置在两个或多个网络之间的安全屏障，用于保障本地网络资源的安全。

#### 4.3.2 VPN 技术

VPN(Virtual Private Network) 是指利用公用网络来建立私有专用网络的一种技术。

#### 4.3.3 访问控制技术

访问控制是主体依据控制策略或权限对客体本身或资源实施的不同授权访问。

#### 4.3.4 网络安全隔离

网络安全隔离是将网络攻击隔离在不同隔离域，以提高安全性。

#### 4.3.5 网络安全协议

SSL/SET/HTTPS 等协议提供数据加密、服务器认证等。

#### 4.3.6 网络安全审计

安全审计是对网络的脆弱性进行测试评估和分析。

### 4.4 绿色网络设计思路

#### 4.4.1 绿色网络设计思路

网络设备作为网络设计方案的基础组成部分，应从全生命周期考虑绿色设计，即遵循精简设计、重用设计和回收设计方法，从节能、减排、可回收利用全方位进行设备绿色设计。类似地，在解决方案上，也应从系统的精简、重用和易维护等维度进行绿色环保设计。

#### 4.4.2 绿色网络设计原则

标准化、集成化、虚拟化、智能化是解决方案设计的四大原则，可以确保方案从整体架构高度考虑提高效率、降低 TCO , 达到绿色环保效果。除此之外在设计中还需考虑安全性、可靠性两个指标，进一步优化绿色效果。

## 5 通信网络构建案例分析

### 5.1 高可用网络构建分析

高可用网络构建是网络设计中的关键，确保网络的连续性和稳定性。

#### 5.1.1 网络接入层高可用性设计

- 使用冗余引擎和冗余电源获得系统级冗余。
- 具备冗余系统和双归属连接，支持在汇聚层的主备交换机间快速实现故障切换。
- 通过配置802.1x，动态ARP检查及IP源抑制等功能增加安全性。
- 通过配置802.1x，动态ARP检查及IP源抑制等功能增加安全性。

#### 5.1.2 网络汇聚层高可用性设计

- 汇聚层到核心层采用OSPF等动态路由协议实现路由层面高可用保障。
- 典型连接方式有两种：组网模型和三角形模型。
- 组网模型：汇聚交换机之间均以二层链路互联。
- 三角形模型：汇聚交换机之间均以三层链路互联。

#### 5.1.3 网络核心层高可用性设计

- 核心层设备是网络的枢纽，需要提供高速数据交换能力和极高可靠性。
- 核心层设计要点：
  - 核心层设备故障恢复时间：<500ms;
  - 汇聚层设备故障恢复时间：<1s;
  - 核心、汇聚设备双主控切换时间：<200ms;
  - 核心-汇聚、接入-汇聚链路故障恢复时间：<500ms;
  - 链路聚合故障恢复时间：<1s。

### 5.2 园区网双栈构建分析

园区网双栈构建是应对 IPv6 网络部署业务的关键措施。需要考虑 IPv4 网络投资成本的继承，构建基于 IPv6 的园区网势在必行。

将一个仅支持IPv4 的园区网升级为支持IPv4和 IPv6双栈网络，涉及多种技术和升级方式的选择。首先需要制定下述详细的升级流程：

1. 制订网络设备升级计划。
1. 评估现网中设备对 IPv6 支持情况。
1. 评估现网中需升级至双栈的网络服务。
1. 制定 IPv6 地址的分配方案。
1. 制定详细 IPv6 网络升级方案。

#### 5.2.1 骨干网构建思路

- 在双栈园区网的骨干网建设中，应采用分层建设模式。
- 升级后的 IPv6 网络部分与原有 IPv4 网络部分融合。

#### 5.2.2 园区网隧道技术选用

- 园区网中一些用户可能因预算或技术等原因无法部署双栈，或只能将部分园区网升级为双栈网络。
- 采用隧道技术，如 ISATAP，完成 IPv6 用户接入 IPv6 网络。

#### 5.2.3 园区网 IP地址规划

- 合理的地址规划能保证后续网络部署的稳定性和可维护性。
- 地址资源应全网统一分配。

### 5.3 5G 网络应用

5G 网络除了为人提供高品质网络服务外，还注重为物提供更为广泛的通信服务。

5G 网络在智能电网中的应用：通过 5G 网络将种类繁多数据巨大的设备，如电网智能感知设备(传统电源、新能源电源等),电网中的输变电网设备、配电设备等，用户电表、电动汽车等连接到物联网 (IoT) 平台中，由 IoT 平台进行电网各个环节的数据采集和智能分析，从而为电网的高级应用(输电业务、配电业务、综合能源管理等业务部门)的科学决策提供有力的支撑。

另外，在智能电网中还存在为提高能源分配效率并要求在发生不可预见事件时能迅速响应以重新配置智能电网的需求，如对于任何时刻发生的事件触发消息、任何两个通信点之间的一个跳闸事件的传输时延应小于 8ms。 为 此 ， 采用 5G 系统的边缘计算技术 ( MEC ) 及 uRLLC 切片技术来满足这样的苛刻要求。
