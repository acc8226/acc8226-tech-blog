---
title: 10. 软件架构的演化和维护
date: 2025-09-12 22:00:00
updated: 2025-09-12 22:00:00
categories: [系统架构设计师]
---

## 1 软件架构演化和定义的关系

### 1.1 演化的重要性


软件架构的演化就是软件整体结构的演化，演化过程涵盖软件架构的全生命周期，包括软件架构需求的获取、软件架构建模、软件架构文档、软件架构实现以及软件架构维护等阶段。

为什么软件架构演化如此重要?

1. 软件架构演化正是为了保障这些方面向人们预期的方向发展的重要措施。
1. 基于软件架构进行的软件检测和修改成本相对较低。
1. 演化可以更好地保证软件演化的一致性和正确性，而且明显降低软件演化的成本，并且软件架构演化使得软件系统演化更加便捷。<!-- more -->

### 1.2 演化和定义的关系

- 定义多样性：软件架构的定义多样，不同定义下架构的演化方式和组成规则不同。
- SA 定义：SA（Software Architecture）定义包括组件、连接器和约束，关注构件和约束的演化。

## 2 面向对象软件架构演化过程

### 2.1 对象演化

在面向对象软件架构中，对象演化包括添加对象（AddObject，AO）和删除对象（DeleteObject，DO）两种操作：

- 添加对象（AO）
  - 在顺序图中添加一个新的对象。
  - 用于实现系统需要的新功能或增加架构灵活性。

- 删除对象（DO）
  - 删除顺序图中现有的对象。
  - 用于移除不再需要的功能或简化系统。
  - 对于没有交互关系的对象，删除对系统无影响。

对象演化通常伴随消息流的变化，新增消息以完成交互，从而影响架构的正确性或动态属性。

## 2.2 消息演化

消息演化是顺序图中的核心元素，包含名称、源对象、目标对象、时序等信息。消息演化会影响对象之间的交互行为，从而对架构的正确性或时态属性产生影响。

### 2.2.1 消息演化的分类

1. AddMessage (AM)
   - 添加新消息，影响对象之间的交互行为。
2. DeleteMessage (DM)
   - 删除现有消息，可能影响对象之间的交互行为。
3. SwapMessageOrder (SMO)
   - 改变消息的发送或接收顺序，不一定会影响对象之间的交互行为。
4. OverturnMessage (OM)
   - 改变消息的发送或接收对象，影响对象之间的交互行为。
   - 图10-2d展示了OM消息演化的自动化表示。
5. ChangeMessageModule (CMM)
   - 改变消息的发送或接收对象的模块，影响对象之间的交互行为。
   - 图10-2e展示了CMM消息演化的自动化表示。
6. 其他消息演化
   - 如 CMM 和 SMO 组合、AM 和 DM 组合等。

### 2.2.2 消息演化的影响

- 第 1 类演化（AM 和 DM）直接影响对象之间的交互行为。
- 第 2 类演化（SMO）不一定会影响对象之间的交互行为，但可能会影响架构设计的正确性或时态属性。
- 第 3 类演化（OM和CMM）直接影响对象之间的交互行为。

消息演化是顺序图中演化的核心，对象的演化会伴随着消息演化，但二者的演化是相互独立的。在进行架构演化时，需要对相关联的消息演化进行分析。

### 2.3 复合片段演化

复合片段演化涉及对象交互关系的控制流描述，主要包括四种类型：

1. AddFragment (AF)
   - 添加新的复合片段，增加控制流。
2. DeleteFragment (DF)
   - 删除现有复合片段，移除控制流。
3. FragmentTypeChange (FTC)
   - 改变复合片段的类型，调整控制流。
4. FragmentConditionChange (FCC)
   - 改变复合片段内部执行条件，影响控制流。

复合片段演化对对象交互流程有直接影响，可能导致架构设计的正确性或时态属性变化。演化时需验证以确保不产生错误。

### 2.4 约束演化

约束演化涉及架构配置的修改，主要包括：

1. Add Constraint (AC)
   - 添加新的约束信息，影响架构设计。
   - 直接添加约束，需验证其满足性。
2. Delete Constraint (DC)
   - 移除现有约束信息，调整架构设计。
   - 直接移除约束，需确保设计仍满足演化后的约束。

约束演化通常不直接存储在定义的层次自动机中，需要通过添加和删除约束信息进行管理。修改约束信息可视为删除旧约束并添加新约束。
