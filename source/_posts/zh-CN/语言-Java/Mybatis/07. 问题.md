---
title: 07. MyBatis é‡åˆ°è¿‡é—®é¢˜
date: 2022-10-01 00:00:00
updated: 2022-10-01 00:00:00
categories:
  - è¯­è¨€-Java
  - æ¡†æ¶-MyBatis
tags:
- Java
- MyBatis
---

## é‡åˆ°è¿‡çš„é—®é¢˜

### mysql ä¸­åˆ¤æ–­è®°å½•æ˜¯å¦å­˜åœ¨æ–¹æ³•æ¯”è¾ƒ

```sql
select IFNULL(
(SELECT 1 FROM gen_table where table_id = 1 limit 1),
0) AS c1
```

ç»“æœä¸º 1ï¼Œåˆ™è¯´æ˜è®°å½•å­˜åœ¨ï¼›ç»“æœä¸º 0ï¼Œåˆ™è¯´æ˜è®°å½•ä¸å­˜åœ¨ã€‚

### Invalid bound statement (not found)å‡ºç°åŸå› å’Œè§£å†³æ–¹æ³•

1\. mapper.xml ä¸­çš„ namespace å’Œå®é™…çš„ mapper æ–‡ä»¶ä¸ä¸€è‡´
è¿™ä¸ªé—®é¢˜å…¶å®å¾ˆå¥½è§£å†³ï¼Œçªå¤§çœ¼ç›ï¼Œä»”ä»”ç»†ç»†çœ‹çœ‹ï¼Œåˆ°åº•å¯¹ä¸å¯¹åº”ä¸å°±å¥½äº†å˜›

2\. mapper æ¥å£ä¸­çš„æ–¹æ³•åå’Œ mapper.xml ä¸­çš„ id æ ‡ç­¾ä¸ä¸€è‡´
è¿™ä¸ªé—®é¢˜å’Œä¸Šä¸ªé—®é¢˜è§£å†³æ–¹æ³•ä¸€æ ·ï¼Œä»”ç»†å¯¹å¯¹å˜›ï¼Œè¿™ä¸ªå†å¯¹ä¸å‡ºæ¥ï¼Œé¢å£æ€è¿‡å§ã€‚

3\. è‹¥ä»¥ä¸Šä¸¤æ­¥çš„é—®é¢˜éƒ½æ²¡æœ‰ï¼Œä½†æ˜¯è¿˜æ˜¯ä¸è¡Œï¼Œå¯èƒ½åŸå› å°±æ˜¯ï¼Œæ²¡æœ‰æ„å»ºè¿›å»ï¼Œæ‰“å¼€ target çœ‹çœ‹å¯¹åº”çš„ mapper.xml æ–‡ä»¶åœ¨ä¸åœ¨

### ã€å¼€å‘é—®é¢˜ã€‘Javaå¯åŠ¨æŠ¥é”™ï¼š java.sql.SQLSyntaxErrorException:Tableâ€˜xx.QRTZ_LOCKSâ€˜ doesnâ€˜t exist

é€šè¿‡ docker å®‰è£… mysqlã€redis ä»¥åå¯åŠ¨æ—¶å€™æŠ¥é”™ï¼Œä½†æ˜¯æ•°æ®åº“é‡Œé¢å‘ç°æœ‰è¿™ä¸ªè¡¨ï¼Œå¥‡äº†æ€ªäº†ï¼Œç½‘ä¸Šä¸€é¡¿æœç´¢å‘ç°ï¼ŒåŸæ¥æ˜¯ linux ä¸‹ mysql é»˜è®¤æ˜¯å¤§å°å†™æ•æ„Ÿçš„ï¼Œä½†æ˜¯æˆ‘ä»¬æ­£å¸¸ä½¿ç”¨éƒ½æ˜¯å¤§å°å†™ä¸æ•æ„Ÿã€‚

```sql
-- 0 æ˜¯ä¸åŒºåˆ†å¤§å°å†™ï¼Œ1 æ˜¯åŒºåˆ†å¤§å°å†™
SHOW VARIABLES LIKE 'lower_case_table%';
```

- - -

Mybatis æŠ¥é”™ attempted to return null from a method with a primitive return type (int).-çœ‹å‡†ç½‘
<https://www.kanzhun.com/jiaocheng/387212.html>

ã€javaã€‘Mybatis è¿”å› int ç±»å‹ä¸ºç©ºæ—¶æŠ¥é”™ attempted to return null from a method with a primitive return type (intï¼‰_å“ˆå£«å¥‡-CSDNåšå®¢
<https://blog.csdn.net/kisscatforever/article/details/77801060>

"nested exception is org.apache.ibatis.reflection.ReflectionException: There is no getter for property named 'paymentTypeCode' in 'class java.lang.String'"

xml ä¸­ æˆ–è€…åœ¨ ç±»æ–¹æ³•ä¸Šå†™çš„ sql è¯­å¥æœ‰é—®é¢˜

### SpringBoot æ•´åˆ Mybatis æŠ¥é”™ Consider defining a bean of type 'xx.xx.xx' in your configur

Consider defining a bean of type 'com.poly.ncl.chargepaychange.mapper.ChargePayChangeMapper' in your configuration.

è¿™æ˜¯ç”±äº springBoot å¯åŠ¨æ—¶ï¼Œæ²¡æœ‰æ‰«æåˆ° com.alibaba.dao.EntFileDaoï¼Œè€Œåœ¨ com.alibaba.serviceImpl.EntFileServiceImpl ä¸­åˆä½¿ç”¨äº† @Autowired private EnfileDao entFileDao è¿›è¡Œè£…é…ï¼Œæ‰€ä»¥ä¼šå‘ç°é”™è¯¯ï¼Œè¯´æ²¡æœ‰å®šä¹‰ã€‚æ­¤æ—¶éœ€è¦åœ¨ springBoot çš„å¯åŠ¨ç±»ä¸Šï¼ŒåŠ ä¸ªæ³¨è§£ï¼š@MapperScan("æŒä¹…å±‚è·¯å¾„")ï¼Œè¿™æ ·å°±ä¼šæ‰«æåˆ° com.alibaba.dao.EntFileDao äº†ã€‚

åŸæ–‡ï¼š<https://blog.csdn.net/weixin_39800144/article/details/79176373>

### java.sql.SQLException: Incorrect string value: '\xF0\x9F\xA7\xA1",...'

```text
### Cause: java.sql.SQLException: Incorrect string value: '\xF0\x9F\xA7\xA1",...' for column 'req_body' at row 1
; uncategorized SQLException; SQL state [HY000]; error code [1366]; Incorrect string value: '\xF0\x9F\xA7\xA1",...' for column 'req_body' at row 1; nested exception is java.sql.SQLException: Incorrect string value: '\xF0\x9F\xA7\xA1",...' for column 'req_body' at row 1
    at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:89)
```

é”™è¯¯åŸå› ï¼šå‚æ•°ä¸­å¸¦æœ‰ emoji è¡¨æƒ…ï¼Œæ’å…¥æ•°æ®åº“æ—¶ï¼Œä¸€äº›ç‰¹æ®Šå­—ç¬¦å¦‚ â€œğŸŒ™â€ï¼Œæ’å…¥æŠ¥å¼‚å¸¸

è§£å†³æ€è·¯ï¼šå› ä¸ºå­—ç¬¦ç¼–ç é›†ä¸º utf8,ä¸æ”¯æŒä¸€äº› basic multilingual plane å’Œè¡¥å……å­—ç¬¦ï¼Œé‚£ä¹ˆå¦‚ä½•è®© mysql å­˜å‚¨ emoji è¡¨æƒ…ï¼Œæ‰€ä»¥éœ€è¦æ”¹æˆ utf8mb4.

è§£å†³æ–¹æ³•ï¼š

```java
package com.zhangsan.product.utils;

import java.util.regex.Pattern;

public class EmojiUtil {
    /**
     * emojiè¡¨æƒ…æ›¿æ¢
     *
     * @param source åŸå­—ç¬¦ä¸²
     * @return è¿‡æ»¤åçš„å­—ç¬¦ä¸²
     */
    public static String filterEmoji(String source) {
        String target;
        if (source != null && source.length() > 0) {
            target = pattern.matcher(source).replaceAll("");
        } else {
            target = source;
        }
        return target;
    }

    private static final Pattern pattern = Pattern.compile("[\ud800\udc00-\udbff\udfff\ud800-\udfff]");

    private EmojiUtil() {
    }
}
```

### "nested exception is org.apache.ibatis.builder.BuilderException: Error evaluating expression 'cardNumber != null AND cardNumber != '''. Cause: org.apache.ibatis.ognl.ExpressionSyntaxException: Malformed OGNL expression: cardNumber != null AND cardNumber != '' [org.apache.ibatis.ognl.ParseException: Encountered

'cardNumber != null AND cardNumber != '''ã€‚

åŸå› æ˜¯æˆ‘å°† and å¤§å†™äº†ã€‚

ä¿®æ”¹åå°±å¥½äº†

'cardNumber != null and cardNumber != '''ã€‚

## å‚è€ƒ

SpringBoot æ•´åˆ Mybatis æŠ¥é”™:Consider defining a bean of type â€˜xx.xx.xxâ€˜ in your configur_ITäº‘æ¸…çš„åšå®¢-CSDNåšå®¢_mybatisplus consider defining a bean of type
<https://blog.csdn.net/weixin_39800144/article/details/79176373>
