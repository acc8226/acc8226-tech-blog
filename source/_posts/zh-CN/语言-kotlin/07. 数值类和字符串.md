---
title: 07. 字符串和拓展函数
date: 2023-01-06 23:22:00
updated: 2023-01-06 23:22:00
categories:
  - 语言
  - Kotlin
tags:
- kotlin
---

## 字符串

### 转义字符和 Unicode 字符编码系统

用\转义字符。是字符还是有特别意义的标记，编译器通过转义字符 就能区分开来了。

举例

```kt
val cc = '\''
```

每个字符都是 Char 类型的一个实例。更具 体地讲，Char 就是 Unicode 字符。按照 Unicode 标准联盟的定义，Unicode 字符编码系统的设计 目的是实现“多种语言书面文字的互相转换、处理和显示”。

要声明一个字符，有两种方式。不过无论采用哪种方式，字符都要放在一对单引号里。

对于 键盘上的字符，最简单的方式就是把它放在单引号之中：

```kt
val capitalA: Char = 'A'
```

但是，不是所有 136 690 个字符都能在键盘上找到。因此，你可以使用 Unicode 转义字符序 列\u 加 Unicode 字符编码来表示一个字符：

```kt
val unicodeCapitalA: Char = '\u0041'
```

### 截取

#### substring

substring 函数支持 IntRange 类型（表示一个整数范围的类型）的参数。这个 IntRange。

示例:

```kt
val indexOfApostrophe = TAVERN_NAME.indexOf('\'')
val tavernMaster = TAVERN_NAME.substring(0 until indexOfApostrophe)
```

参数表示的范围决定要截取哪些位置的字符。这里，范围是从第一个字符直到撇号之前的字符 （until 创建的范围不包括上限值）。

#### split

split 函数返回的是 List 集合数据。使用给定的分隔符，该函数会返回一系列子字符串。

```kt
val data = menuData.split(',')
val type = data[0]
val name = data[1]
val price = data[2]
```

而 List 集合又支持一种叫解构（destructuring）的语 法特性（这个 Kotlin 特性允许你在一个表达式里给多个变量赋值）。所以，如下所示， 我们可以用解构语法来替换一条条的赋值语句。

```kt
val menuData = ...
val (type, name, price) = menuData.split(',')
```

### 字符串操作

#### replace

replace 函数。顾名思义，此函数能按给定规则替换字符串中的 字符。replace 函数支持用正则表达式（稍后会展开讨论）确定要操作哪些字符，然后调用你定 义的匿名函数来确定如何替换匹配字符。

使用的 replace 函数需要两个值参。第一个是正则表达式（regex），用来决定要替换哪些 字符。正则表达式可以针对你要搜索的字符定义通用的搜索模式。第二个值参是匿名函数，用来 确定该如何替换正则表达式搜索到的字符。

```kt

```

### 字符串比较

使用结构相等操作符==来判断 name 变量值和"Dragon's Breath"是否结 构相等。之前，你已见过用==判断数值相等的例子。用于字符串时，它会检查两个字符串中的字 符是否都匹配，顺序是否一致。

判断两个变量相等还有另一种方式：引用相等。这种方式会检查两个变量是否引用着同一个 类实例，也就是说两个变量是否指向内存堆上的同一对象。做引用相等判断时使用===符号。

引用相等比较很少用于比较字符串。一般来说，相比关心两个字符串是不是同一实例，我们更关心它们是不是相等字符，以及顺序是否一致（或者说两个不同的类实例是否结构相同）。

如果熟悉 Java 语言，那么你就知道，就比较字符串来说，==操作符的行为方式和 Kotlin 不 一样，Java 用==做引用比较。要在 Java 中做结构相等比较，要用 equals 函数。

### 字符串遍历

String 类型还有一些其他函数，可以一次一个地遍历字符串，就像 indexOf 和 split 函数 一样。例如，使用 forEach 函数，你可以打印出小客栈饮料名字的每个字符，一次一个字符。

示例：

```kt
"Dragon's Breath".forEach { println("$it\n") }
```

许多这类函数也可以用于 List 类型。同样，你将在第 10 章学到的大多数可以遍历集合的函 数也适用于 String 类型。在很多方面，Kotlin 中 String 类型的行为就像字符集合。

## 数值类

## 拓展函数

字符串编码后再解码

```kt
String.toByteArray(charset("gbk"))
```

## 参考
