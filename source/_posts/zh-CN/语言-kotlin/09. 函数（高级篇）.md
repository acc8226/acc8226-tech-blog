---
title: 09. 函数（高级篇）
date: 2023-01-03 17:56:00
updated: 2023-01-03 17:56:00
categories:
  - 语言
  - Kotlin
tags:
- kotlin
---

## Infix Functions 中缀函数

具有单个参数的成员函数和扩展可以转换为中缀函数。

```kt
fun main() {

  infix fun Int.times(str: String) = str.repeat(this)        // 1
  println(2 times "Bye ")                                    // 2

  val pair = "Ferrari" to "Katrina"                          // 3
  println(pair)

  infix fun String.onto(other: String) = Pair(this, other)   // 4
  val myPair = "McLaren" onto "Lucas"
  println(myPair)

  val sophia = Person("Sophia")
  val claudia = Person("Claudia")
  sophia likes claudia                                       // 5
}

class Person(val name: String) {
  val likedPeople = mutableListOf<Person>()
  infix fun likes(other: Person) { likedPeople.add(other) }  // 6
}
```

1. 在 Int 上定义中缀扩展函数。
2. 调用中缀函数。
3. 通过从标准库调用中缀函数来创建一个副。
4. 下面是您自己创造性地调用的实现。
5. 中缀表示法也适用于成员函数(方法)。
6. 包含类成为第一个参数。

## 运算符函数

某些函数可以“升级”为运算符，允许它们使用相应的运算符符号进行调用。

```kt
operator fun Int.times(str: String) = str.repeat(this)       // 1
println(2 * "Bye ")                                          // 2

operator fun String.get(range: IntRange) = substring(range)  // 3
val str = "Always forgive your enemies; nothing annoys them so much."
println(str[0..14])
```

1. 这使用操作符修饰符将中缀函数从上面的步骤进一步提取出来。
2. times() 的操作符符号是 `*`，因此可以使用 `2 * "Bye "` 调用函数。
3. 运算符函数允许对字符串进行轻松的范围访问。
4. get()运算符启用了括号访问语法。

## 拓展函数

字符串编码后再解码

```kt
String.toByteArray(charset("gbk"))
```
