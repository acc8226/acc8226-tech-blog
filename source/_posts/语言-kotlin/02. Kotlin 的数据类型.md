---
title: 02. Kotlin 的数据类型和变量
date: 2022-10-07 21:44:00
updated: 2022-10-07 21:44:00
categories:
  - 语言
  - Kotlin
tags:
- kotlin
---

## 基本数据类型

和 Java 不同，事实上 Kotlin 只提供引用类型这一种数据类型。

Kotlin 这样设计基于几大理由。首先，只有一种数据类型可选，你就不容易因选项多而选错， 进而陷入编码困境。例如，定义了一个基本数据类型实例后，写着写着，猛然发现要用到只有引 用类型才支持的泛型功能，怎么办？Kotlin 通过只提供一种类型规避了此问题。

也许熟悉 Java 的你会说：“但是基本数据类型的性能要好于引用类型啊！”

为了让你愉快地使用引用类型，Kotlin 编译器会根据不同的场景将其编译成为 Java 中的基本类型数据还是包装类对象。假如你熟悉 Java 的八大基本数据类型，也能在 Kotlin 中分别找到它们的对应引用数据类型。

* 整数类型：Byte、Short、Int 和 Long，Int 是默认类型。
* 浮点类型：Float 和 Double，Double 是默认类型。
* 字符类型：Char。
* 布尔类型：Boolean

> **Java 程序员注意**　在 Java 中表示 long 类型整数时可以在数字后面加小写英文字母 l，但由于可读性不好，容易被误认为是阿拉伯数字 1，所以在 Kotlin 中部不允许这样表示。

在使用整数变量赋值，还可以使用二进制和十六进制表示，但不支持八进制，它们的表示方式分别如下：

* 二进制数：以 0b 或 0B 为前缀，注意 0 是阿拉伯数字，不要误认为是英文字母 o。
* 十六进制数：以 0x 或 0X 为前缀，注意 0 是阿拉伯数字。

### 字符类型

和 Java 一样, 字符类型表示单个字符，Kotlin 中 Char 声明字符类型，Kotlin 中的字符常量必须用单引号括起来的单个字符。

Kotlin 字符采用双字节 Unicode 编码，占**两个字节（16位）**，因而可用十六进制（无符号的）编码形式表示，它们的表现形式是`\uXXXX`，其中`XXXX`为 16 位十六进制数，所以'A'字符也可以用Unicode编码'\u0041'表示，如果对字符编码感兴趣可以到维基百科（[https://zh.wikipedia.org/wiki/Unicode](https://zh.wikipedia.org/wiki/Unicode)字符列表）查询。

#### 转义字符(和 java 一致)

![常用转义符](https://upload-images.jianshu.io/upload_images/1662509-bb5c986ace88236d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

## 引用数据类型

出来基础数据的其他类型都是该类型。比如 map、set、array。

## Null Safety

为了消除 NullPointerException，Kotlin 的变量类型不允许赋值 null。如果您需要一个可以为空的变量，可以通过添加？在其类型的末端。这一点与 Java 和 Objective-C 等语言有很大的不同。

### 可空类型

有时候，Kotlin 程序需要使用 null 值，例如在与外部 Java 代码交互时，或者表示一个真正缺失的状态时。Kotlin 提供空跟踪来优雅地处理这种情况。

Kotlin 为每一种非空类型提供对应的可空类型（Nullable），就是在非空类型后面加上问号（?）表示可空类型。 `var n: Int? = 10`

Int? 是可空类型，它所声明的变量 n 可以接收空值。

```kt
var nullable: String? = "You can keep a null here"
nullable = null
```

1. 接受可为空的字符串并返回其说明的函数。
2. 如果给定的字符串不为空，也不为空，则返回有关其长度的信息。
3. 否则，告诉调用方字符串为空或 null。

可空类型在具体使用时会有一些限制：

* 不能直接调用可空类型对象的函数或属性。
* 不能把可空类型数据赋值给非空类型变量。
* 不能把可空类型数据传递给非空类型参数的函数。

## 类型转换

### 数值类型之间的转换

本节讨论数值类型之间互相转换，**数值**在进行赋值时采用的是**显示转换**，而在**数学计算**时采用的是**隐式转换**。

#### 赋值与显式转换

Kotlin 是一种安全的语言，对于类型的检查非常严格，不同类型数值进行赋值是禁止的. Kotlin中要想实现这种赋值转换，需要使用转换函数显式转换。Kotlin 的 6 种数值类型（Byte、Short、Int、Long、Float 和 Double），以及Char类型都有如下7个转换函数：

* toByte(): Byte
* toShort(): Short
* toInt(): Int
* toLong(): Long
* toFloat(): Float
* toDouble(): Double
* toChar(): Char

#### 数学计算与隐式转换

多个数值类型数据可以数学计算，由于参与进行数学计算的数值类型可能不同，编译器会根据上下文环境进行隐式转换。

## 参考

Kotlin 编程权威指南
<https://www.ituring.com.cn/book/tupubarticle/27591?bookID=2610>
