---
title: 04. Kotlin 语句和表达式
date: 2022-10-07 21:44:00
updated: 2022-10-07 21:44:00
categories:
  - 语言
  - Kotlin
tags:
- kotlin
---

## 流程控制

程序设计中的流程控制有三种结构，即顺序、分支和循环结构。

### 分支结构

#### if 条件判断

works the same way as in most languages.
工作方式和大多数语言一样。

* if [可选搭配 else]
* if 搭配 else if [可选搭配 else]
* 以上两种模式的嵌套语句

注意　如果语句组只有一条语句，可以省略大括号。但一般不建议省略。

### when 多分支结构

when 提供多分支程序结构。

1. C语言风格的switch只能比较离散的单个的整数（或可以自动转换为整数）表达式，而when可以使用整数、浮点数、字符、字符串，以及任何可以比较的类型表达式，而且它比较的数据可以是离散的也可以是连续的范围。
2. when中的每个分支不需要添加break语句，分支执行完成就会跳出when语句。
3. when可以作为表达式使用，并且可以将一个结果赋值给其他变量，或者与其他表达式进行计算。而C语言风格的switch语句不能作为表达式。

```kt
when (表达式) {
    分支条件表达式1 -> {
        语句组1
    }
    分支条件表达式2 -> {
        语句组2
    }
    ...
    分支条件表达式n -> {
        语句组n
    }
    else -> {
        语句组n＋1
    }
}
```

在运行时“表达式”计算结果，会与每个分支中的“分支条件表达式”进行匹配，直到找到一个分支，然后进入该分支的代码块执行，执行完成结束 when 语句。when 结构当做语句时，最后的 else 分支可以省略。另外，如果语句组所在的代码块只有一条语句，可以省略大括号。

Kotlin中的when语句很灵活，上述示例中表达式结果比较是否等于分支条件表达式结果。此外，还可以使用in或者!in表达式结果是否在一个范围或集合中；可以用is或者!is表达式结果是否是某一类型的对象。

when语句还可以省略表达式，此时分支条件表达式可以是单纯的布尔值，示例代码如下：

```kt
when {//省略表达式
    testScore >= 90 -> println('优') //分支条件表达式单纯的布尔值
    else -> println('良')
}
```

### 循环结构

Kotlin 支持所有常用的循环: for、 while、 do-while

```kt
// for 循环
val cakes = listOf("carrot", "cheese", "chocolate")
for (cake in cakes) {
    println("Yummy, it's a $cake cake!")
}

// while 循环 和 do-while 循环
var cakesEaten = 0
var cakesBaked = 0
while (cakesEaten < 3) {
    println("Eat a Cake")
    cakesEaten++
}

do {
    println("Bake a Cake")
    cakesBaked++
} while (cakesBaked < cakesEaten)
```

Kotlin 语言中没有C语言风格的for语句，它的for语句相等于Java中增强for循环语句，只用于对范围、数组或集合进行遍历。

在for语句遍历集合时，一般不需要循环变量，但是如果需要使用循环变量，可以使用集合indices属性，具体示例代码如下：

```kt
for (i in numbers.indices) { //获取数组索引
    println("numbers[$i] = ${numbers[i]}")
}
```

## 语句

语句关注的代码执行过程。在 Kotlin 语言中，一条语句结束后可以不加分号，也可以加分号，通过情况下绝对不加。但是有一种情况必须加分号，那就是多条语句写在一行的时候，需要通过分号来区别语句(但最后一句可以不加)，但一般不建议写在同一行，会影响观感。

```kt
var a1: Int = 10; var a2: Int = 20;
```

### break 语句

break语句可用于上一节介绍的while、do-while和for循环结构，它的作用是强行退出循环体，不再执行循环体中剩余的语句。

在循环体中使用break语句有两种方式：带有标签和不带标签。语法格式如下：

```kt
break         //不带标签
break@label  //带标签，label是标签名
```

### continue 语句

continue语句用来结束本次循环，跳过循环体中尚未执行的语句，接着进行终止条件的判断，以决定是否继续循环。对于for语句，在进行终止条件的判断前，还要先执行迭代语句。

## 表达式

为了使代码更加简洁 Kotlin 将 Java 中一些语句进行简化，使之成为一种表达式，这些表达式包括：控制结构表达式、try 表达式、表达式函数体和对象表达式。示例代码如下：

```kt
// 表达式函数体, a + b表达式没有放到一对大括号中
fun sum(a: Int, b: Int): Int = a + b

// 与 C++ 语言中的 main 函数类似，都不属于任何的类，称为顶层函数（top-level function）
fun main(args: Array<String>) {
    val englishScore = 99
    val chineseScore = 82

    //if 控制结构表达式
    val result = if (englishScore < 60) "不及格" else "及格"
    println(result)

    // 调用 sum 函数
    val totalScore = sum(englishScore, chineseScore)
    println(totalScore)

    // try 表达式
    val score = try {
    } catch (e: Exception) {
        return
    }
    println(score)
}
```

## 参考

[第 3 章　第一个 Kotlin 程序-图灵社区](http://www.ituring.com.cn/book/tupubarticle/19718)
