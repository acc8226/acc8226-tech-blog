## 分析数据结构

[PDM 逆向工程](https://www.cnblogs.com/tian2010/archive/2012/07/04/2576998.html)是指，从现有的 DBMS 的用户数据库或现有数据库 SQL 脚本生成 PDM 的过程。

我这里使用 DbVisualizer 13.0.2 对表结构和关联关系进行分析。

## 表信息统计

Thingsboard CE  V3.3.4.1

## 表 1 admin_settings 管理员设置表

| **字段名**   | **字段类型** | **长度** | **主键** | **外键** | **唯一键** | **非空** | **说明**                          |
| ------------ | ------------ | -------- | -------- | -------- | ---------- | -------- | --------------------------------- |
| id           | uuid         |          | Y        | N        | N          | Y        | Uuid                              |
| created_time | int8         | 64       | N        | N        | N          | Y        | 创建时间                          |
| json_value   | varchar      |          | N        | N        | N          | N        | 根据类型不同，json字符串也不同    |
| key          | varchar      | 255      | N        | N        | N          | N        | 类型，目前已知类型有general、mail |

## 表 2 alarm 警报表 

| **字段名**               | **字段类型** | **长度** | **主键** | **外键** | **唯一键** | **非空** | **说明**                                                     |
| ------------------------ | ------------ | -------- | -------- | -------- | ---------- | -------- | ------------------------------------------------------------ |
| id                       | uuid         |          | Y        | N        | N          | Y        | 编号                                                         |
| created_time             | int8         | 64       | N        | N        | N          | Y        | 创建时间戳                                                   |
| ack_ts                   | int8         | 64       | N        | N        | N          | N        | 创建时间                                                     |
| clear_ts                 | int8         | 64       | N        | N        | N          | N        | 清除时间                                                     |
| additional_info          | varchar      |          | N        | N        | N          | N        | 额外信息                                                     |
| end_ts                   | int8         | 64       | N        | N        | N          | N        | 结束时间                                                     |
| originator_id            | uuid         |          | N        | N        | N          | N        | 起因实体id                                                   |
| originator_type          | int4         | 32       | N        | N        | N          | N        | 起因实体类型                                                 |
| propagate                | bool         |          | N        | N        | N          | N        | 起因实体类型                                                 |
| severity                 | varchar      | 255      | N        | N        | N          | N        | CRITICAL：危险, MAJOR：重要, MINOR：次要, WARNING：警告,INDETERMINATE：不确定 |
| start_ts                 | int8         | 64       | N        | N        | N          | N        | 开始时间                                                     |
| status                   | varchar      | 255      | N        | N        | N          | N        | ACTIVE_UNACK：激活未应答, ACTIVE_ACK：激活已应答, CLEARED_UNACK：清除未应答, CLEARED_ACK：清除已应答 |
| tenant_id                | uuid         |          | N        | N        | N          | N        | 租户编号                                                     |
| customer_id              | uuid         |          | N        | N        | N          | N        | 客户编号                                                     |
| propagate_relation_types | varchar      |          | N        | N        | N          | N        |                                                              |
| type                     | varchar      | 255      | N        | N        | N          | N        |                                                              |
| propagate_to_owner       | bool         |          | N        | N        | N          | N        |                                                              |
| propagate_to_tenant      | bool         |          | N        | N        | N          | N        |                                                              |

## 表3 api_usage_state API 使用情况表 

| **字段名**   | **字段类型** | **长度** | **主键** | **外键** | **唯一键** | **非空** | **说明** |
| ------------ | ------------ | -------- | -------- | -------- | ---------- | -------- | -------- |
| id           | uuid         |          | Y        | N        | N          | Y        |          |
| created_time | int8         | 64       | N        | N        | N          | Y        |          |
| tenant_id    | uuid         |          | N        | N        | Y          | N        |          |
| entity_type  | varchar      | 32       | N        | N        | N          | N        |          |
| entity_id    | uuid         |          | N        | N        | N          | N        |          |
| transport    | varchar      | 32       | N        | N        | N          | N        |          |
| db_storage   | varchar      | 32       | N        | N        | N          | N        |          |
| re_exec      | varchar      | 32       | N        | N        | N          | N        |          |
| js_exec      | varchar      | 32       | N        | N        | N          | N        |          |
| email_exec   | varchar      | 32       | N        | N        | N          | N        |          |
| sms_exec     | varchar      | 32       | N        | N        | N          | N        |          |
| alarm_exec   | varchar      | 32       | N        | N        | N          | N        |          |

## 表 4 asset 资产表 

| **字段名**      | **字段类型** | **长度** | **主键** | **外键** | **唯一键** | **非空** | **说明**             |
| --------------- | ------------ | -------- | -------- | -------- | ---------- | -------- | -------------------- |
| id              | uuid         |          | Y        | N        | N          | Y        | 唯一标识             |
| created_time    | int8         | 64       | N        | N        | N          | Y        | 创建时间戳           |
| additional_info | varchar      |          | N        | N        | N          | N        | 详情                 |
| customer_id     | uuid         |          | N        | N        | N          | N        | 分配给客户id         |
| name            | varchar      | 255      | N        | N        | N          | N        | 名称                 |
| label           | varchar      | 255      | N        | N        | N          | N        |                      |
| search_text     | varchar      | 255      | N        | N        | N          | N        | 查询条件，一般同name |
| tenant_id       | uuid         |          | N        | N        | Y          | N        | 租户id               |
| type            | varchar      | 255      | N        | N        | N          | N        | 资产类型             |

## 表 5 attribute_kv 表 

| **字段名**     | **字段类型** | **长度** | **主键** | **外键** | **唯一键** | **非空** | **说明**                                                     |
| -------------- | ------------ | -------- | -------- | -------- | ---------- | -------- | ------------------------------------------------------------ |
| entity_type    | varchar      | 255      | Y        | N        | N          | Y        | 实体类型	：TENANT：租户, CUSTOMER：客户, USER：用户, DASHBOARD：仪表盘, ASSET：资产, DEVICE：设备, ALARM：警报, RULE_CHAIN：规则引擎, RULE_NODE：规则节点, ENTITY_VIEW：实体视图 |
| entity_id      | uuid         |          | N        | N        | N          | Y        | 实体id                                                       |
| attribute_type | varchar      | 255      | N        | N        | N          | Y        | 属性类型                                                     |
| attribute_key  | varchar      | 255      | N        | N        | N          | Y        | 属性标识                                                     |
| bool_v         | bool         |          | N        | N        | N          | N        | 存放属性的布尔值                                             |
| str_v          | varchar      | 10000000 | N        | N        | N          | N        | 存放属性的字符串值                                           |
| long_v         | int8         | 64       | N        | N        | N          | N        | 存放属性的数字值                                             |
| dbl_v          | float8       | 53       | N        | N        | N          | N        | 存放属性的小数值                                             |
| json_v         | json         |          | N        | N        | N          | N        |                                                              |
| last_update_ts | int8         | 64       | N        | N        | N          | N        | 最后更新时间                                                 |

## 表6 audit_log 审计日志表

| **字段名**             | **字段类型** | **长度** | **主键** | **外键** | **唯一键** | **非空** | **说明**     |
| ---------------------- | ------------ | -------- | -------- | -------- | ---------- | -------- | ------------ |
| id                     | uuid         |          | Y        | N        | N          | Y        | 唯一标识     |
| created_time           | int8         | 64       | N        | N        | N          | Y        | 创建时间戳   |
| tenant_id              | uuid         |          | N        | N        | N          | N        | 租户id       |
| customer_id            | uuid         |          | N        | N        | N          | N        | 客户id       |
| entity_id              | uuid         |          | N        | N        | N          | N        | 实体id       |
| entity_type            | varchar      | 255      | N        | N        | N          | N        | 实体类型     |
| entity_name            | varchar      | 255      | N        | N        | N          | N        | 名称         |
| user_id                | uuid         |          | N        | N        | N          | N        | 用户id       |
| user_name              | varchar      | 255      | N        | N        | N          | N        | 用户名称     |
| action_type            | varchar      | 255      | N        | N        | N          | N        | 活动类型     |
| action_data            | varchar      | 1000000  | N        | N        | N          | N        | 活动数据     |
| action_status          | varchar      | 255      | N        | N        | N          | N        | 活动状态     |
| action_failure_details | varchar      | 1000000  | N        | N        | N          | N        | 活动失败详情 |

## 表 7 component_descriptor 表

| **字段名**               | **字段类型** | **长度** | **主键** | **外键** | **唯一键** | **非空** | **说明** |
| ------------------------ | ------------ | -------- | -------- | -------- | ---------- | -------- | -------- |
| id                       | uuid         |          | Y        | N        | N          | Y        |          |
| created_time             | int8         | 64       | N        | N        | N          | Y        |          |
| actions                  | varchar      | 255      | N        | N        | N          | N        |          |
| clazz                    | varchar      |          | N        | N        | Y          | N        |          |
| configuration_descriptor | varchar      |          | N        | N        | N          | N        |          |
| name                     | varchar      | 255      | N        | N        | N          | N        |          |
| scope                    | varchar      | 255      | N        | N        | N          | N        |          |
| search_text              | varchar      | 255      | N        | N        | N          | N        |          |
| type                     | varchar      | 255      | N        | N        | N          | N        |          |

## 表 8 customer 客户表 

| **字段名**      | **字段类型** | **长度** | **主键** | **外键** | **唯一键** | **非空** | **说明**     |
| --------------- | ------------ | -------- | -------- | -------- | ---------- | -------- | ------------ |
| id              | uuid         |          | Y        | N        | N          | Y        | 客户唯一编号 |
| created_time    | int8         | 64       | N        | N        | N          | Y        | 额外信息     |
| additional_info | varchar      |          | N        | N        | N          | N        | 额外信息     |
| address         | varchar      |          | N        | N        | N          | N        | 第一地址     |
| address2        | varchar      |          | N        | N        | N          | N        | 第二地址     |
| city            | varchar      | 255      | N        | N        | N          | N        | 城市         |
| country         | varchar      | 255      | N        | N        | N          | N        | 国家         |
| email           | varchar      | 255      | N        | N        | N          | N        | 邮箱         |
| phone           | varchar      | 255      | N        | N        | N          | N        | 电话号码     |
| search_text     | varchar      | 255      | N        | N        | N          | N        | 搜索关键字   |
| state           | varchar      | 255      | N        | N        | N          | N        | 省份         |
| tenant_id       | uuid         |          | N        | N        | N          | N        | 租户编号     |
| title           | varchar      | 255      | N        | N        | N          | N        | 客户名称     |
| zip             | varchar      | 255      | N        | N        | N          | N        | 邮政编码     |

## 表 9 dashboard 仪表板 

| **字段名**         | **字段类型** | **长度** | **主键** | **外键** | **唯一键** | **非空** | **说明**       |
| ------------------ | ------------ | -------- | -------- | -------- | ---------- | -------- | -------------- |
| id                 | uuid         |          | Y        | N        | N          | Y        | 唯一标识       |
| created_time       | int8         | 64       | N        | N        | N          | Y        |                |
| configuration      | varchar      |          | N        | N        | N          | N        | 布局信息       |
| assigned_customers | varchar      | 1000000  | N        | N        | N          | N        | 分配给哪些客户 |
| search_text        | varchar      | 255      | N        | N        | N          | N        | 查询字段       |
| tenant_id          | uuid         |          | N        | N        | N          | N        | 租户id         |
| title              | varchar      | 255      | N        | N        | N          | N        | 标题           |
| mobile_hide        | bool         |          | N        | N        | N          | N        |                |
| mobile_order       | int4         | 32       | N        | N        | N          | N        |                |
| image              | varchar      | 1000000  | N        | N        | N          | N        |                |

## 表10 device 设备表 

| **字段名**        | **字段类型** | **长度** | **主键** | **外键** | **唯一键** | **非空** | **说明**                                  |
| ----------------- | ------------ | -------- | -------- | -------- | ---------- | -------- | ----------------------------------------- |
| id                | uuid         |          | Y        | N        | N          | Y        | 设备编号                                  |
| created_time      | int8         | 64       | N        | N        | N          | Y        | 创建时间                                  |
| additional_info   | varchar      |          | N        | N        | N          | N        | 额外信息json串                            |
| customer_id       | uuid         |          | N        | N        | N          | N        | 客户id                                    |
| device_profile_id | uuid         |          | N        | Y        | N          | Y        | 外键，关联 device_profile表的id字段       |
| device_data       | jsonb        |          | N        | N        | N          | N        |                                           |
| type              | varchar      | 255      | N        | N        | N          | N        | 类型                                      |
| name              | varchar      | 255      | N        | N        | N          | N        | 名称                                      |
| label             | varchar      | 255      | N        | N        | N          | N        | 标签                                      |
| search_text       | varchar      | 255      | N        | N        | N          | N        | 搜素关键字                                |
| tenant_id         | uuid         |          | N        | N        | Y          | N        | 租户编号                                  |
| firmware_id       | uuid         |          | N        | Y        | N          | N        | 固件id，可为空，参照ota_package表的id字段 |
| software_id       | uuid         |          | N        | Y        | N          | N        | 软件id，可为空，参照ota_package表的id字段 |

## 表 11 device_credentials 设备认证令牌表
 
| **字段名**        | **字段类型** | **长度** | **主键** | **外键** | **唯一键** | **非空** | **说明**     |
| ----------------- | ------------ | -------- | -------- | -------- | ---------- | -------- | ------------ |
| id                | uuid         |          | Y        | N        | N          | Y        | 编号         |
| created_time      | int8         | 64       | N        | N        | N          | Y        | 创建时间     |
| credentials_id    | varchar      |          | N        | N        | Y          | N        | 认证令牌编号 |
| credentials_type  | varchar      | 255      | N        | N        | N          | N        | 认证令牌类型 |
| credentials_value | varchar      |          | N        | N        | N          | N        | 认证令牌值   |
| device_id         | uuid         |          | N        | N        | Y          | N        | 设备编号     |

## 表12 device_profile 设备配置 

| **字段名**            | **字段类型** | **长度** | **主键** | **外键** | **唯一键** | **非空** | **说明**   |
| --------------------- | ------------ | -------- | -------- | -------- | ---------- | -------- | ---------- |
| id                    | uuid         |          | Y        | N        | N          | Y        | 编号       |
| created_time          | int8         | 64       | N        | N        | N          | Y        | 创建时间   |
| name                  | varchar      | 255      | N        | N        | N          | N        | 名称       |
| type                  | varchar      | 255      | N        | N        | N          | N        |            |
| image                 | varchar      | 1000000  | N        | N        | N          | N        |            |
| transport_type        | varchar      | 255      | N        | N        | N          | N        |            |
| provision_type        | varchar      | 255      | N        | N        | N          | N        |            |
| profile_data          | jsonb        |          | N        | N        | N          | N        |            |
| description           | varchar      |          | N        | N        | N          | N        |            |
| search_text           | varchar      | 255      | N        | N        | N          | N        |            |
| is_default            | bool         |          | N        | N        | N          | N        | 是否默认   |
| tenant_id             | uuid         |          | N        | N        | Y          | N        |            |
| firmware_id           | uuid         |          | N        | Y        | N          | N        | 分配的固件 |
| software_id           | uuid         |          | N        | Y        | N          | N        | 分配的软件 |
| default_rule_chain_id | uuid         |          | N        | Y        | N          | N        |            |
| default_dashboard_id  | uuid         |          | N        | Y        | N          | N        |            |
| default_queue_name    | varchar      | 255      | N        | N        | N          | N        |            |
| provision_device_key  | varchar      |          | N        | N        | Y          | N        |            |

## 表13 edge 表

| **字段名**         | **字段类型** | **长度** | **主键** | **外键** | **唯一键** | **非空** | **说明** |
| ------------------ | ------------ | -------- | -------- | -------- | ---------- | -------- | -------- |
| id                 | uuid         |          | Y        | N        | N          | Y        |          |
| created_time       | int8         | 64       | N        | N        | N          | Y        |          |
| additional_info    | varchar      |          | N        | N        | N          | N        |          |
| customer_id        | uuid         |          | N        | N        | N          | N        |          |
| root_rule_chain_id | uuid         |          | N        | N        | N          | N        |          |
| type               | varchar      | 255      | N        | N        | N          | N        |          |
| name               | varchar      | 255      | N        | N        | N          | N        |          |
| label              | varchar      | 255      | N        | N        | N          | N        |          |
| routing_key        | varchar      | 255      | N        | N        | Y          | N        |          |
| secret             | varchar      | 255      | N        | N        | N          | N        |          |
| search_text        | varchar      | 255      | N        | N        | N          | N        |          |
| tenant_id          | uuid         |          | N        | N        | Y          | N        |          |

## 表14 edge_event
 
| **字段名**        | **字段类型** | **长度** | **主键** | **外键** | **唯一键** | **非空** | **说明** |
| ----------------- | ------------ | -------- | -------- | -------- | ---------- | -------- | -------- |
| id                | uuid         |          | Y        | N        | N          | Y        |          |
| created_time      | int8         | 64       | N        | N        | N          | Y        |          |
| edge_id           | uuid         |          | N        | N        | N          | N        |          |
| edge_event_type   | varchar      | 255      | N        | N        | N          | N        |          |
| edge_event_uid    | varchar      | 255      | N        | N        | N          | N        |          |
| entity_id         | uuid         |          | N        | N        | N          | N        |          |
| edge_event_action | varchar      | 255      | N        | N        | N          | N        |          |
| body              | varchar      | 10000000 | N        | N        | N          | N        |          |
| tenant_id         | uuid         |          | N        | N        | N          | N        |          |
| ts                | int8         | 64       | N        | N        | N          | Y        |          |

## 表15 entity_alarm
 
| **字段名**   | **字段类型** | **长度** | **主键** | **外键** | **唯一键** | **非空** | **说明**                                  |
| ------------ | ------------ | -------- | -------- | -------- | ---------- | -------- | ----------------------------------------- |
| tenant_id    | uuid         |          | N        | N        | N          | Y        | 租户编号                                  |
| entity_type  | varchar      | 32       | N        | N        | N          | N        |                                           |
| entity_id    | uuid         |          | Y        | N        | N          | Y        | 联合主键                                  |
| created_time | int8         | 64       | N        | N        | N          | Y        | 创建时间戳                                |
| alarm_type   | varchar      | 255      | N        | N        | N          | Y        |                                           |
| customer_id  | uuid         |          | N        | N        | N          | N        | 客户编号                                  |
| alarm_id     | uuid         |          | N        | Y        | N          | Y        | 联合主键，同时作为外键关联alarm表的id字段 |

## 表16 entity_view 实体信息

| **字段名**      | **字段类型** | **长度** | **主键** | **外键** | **唯一键** | **非空** | **说明**    |
| --------------- | ------------ | -------- | -------- | -------- | ---------- | -------- | ----------- |
| id              | uuid         |          | Y        | N        | N          | Y        | 编号        |
| created_time    | int8         | 64       | N        | N        | N          | Y        | 创建时间    |
| entity_id       | uuid         |          | N        | N        | N          | N        | 实体id      |
| entity_type     | varchar      | 255      | N        | N        | N          | N        | 实体类型    |
| tenant_id       | uuid         |          | N        | N        | N          | N        | 租户id      |
| customer_id     | uuid         |          | N        | N        | N          | N        | 客户id      |
| type            | varchar      | 255      | N        | N        | N          | N        | 类型        |
| name            | varchar      | 255      | N        | N        | N          | N        | 名称        |
| keys            | varchar      | 10000000 | N        | N        | N          | N        | 标识用的key |
| start_ts        | int8         | 64       | N        | N        | N          | N        | 开始时间    |
| end_ts          | int8         | 64       | N        | N        | N          | N        | 结束时间    |
| search_text     | varchar      | 255      | N        | N        | N          | N        | 查询条件    |
| additional_info | varchar      |          | N        | N        | N          | N        | 详细描述    |

## 表17 event 事件表 

| **字段名**   | **字段类型** | **长度** | **主键** | **外键** | **唯一键** | **非空** | **说明** |
| ------------ | ------------ | -------- | -------- | -------- | ---------- | -------- | -------- |
| id           | uuid         |          | Y        | N        | N          | Y        | 唯一标识 |
| created_time | int8         | 64       | N        | N        | N          | Y        |          |
| body         | varchar      | 10000000 | N        | N        | N          | N        | 主体内容 |
| entity_id    | uuid         |          | N        | N        | N          | N        | 实体id   |
| entity_type  | varchar      | 255      | N        | N        | N          | N        | 实体类型 |
| event_type   | varchar      | 255      | N        | N        | N          | N        | 事件类型 |
| event_uid    | varchar      | 255      | N        | N        | N          | N        |          |
| tenant_id    | uuid         |          | N        | N        | Y          | N        | 租户id   |
| ts           | int8         | 64       | N        | N        | N          | Y        |          |

## 表18 oauth2_client_registration

| **字段名**                  | **字段类型** | **长度** | **主键** | **外键** | **唯一键** | **非空** | **说明** |
| --------------------------- | ------------ | -------- | -------- | -------- | ---------- | -------- | -------- |
| id                          | uuid         |          | Y        | N        | N          | Y        |          |
| created_time                | int8         | 64       | N        | N        | N          | Y        |          |
| domain_name                 | varchar      | 255      | N        | N        | N          | N        |          |
| domain_scheme               | varchar      | 31       | N        | N        | N          | N        |          |
| client_registration_info_id | uuid         |          | N        | N        | N          | N        |          |

## 表19 oauth2_client_registration_info 表

| **字段名**                     | **字段类型** | **长度** | **主键** | **外键** | **唯一键** | **非空** | **说明** |
| ------------------------------ | ------------ | -------- | -------- | -------- | ---------- | -------- | -------- |
| id                             | uuid         |          | Y        | N        | N          | Y        |          |
| enabled                        | bool         |          | N        | N        | N          | N        |          |
| created_time                   | int8         | 64       | N        | N        | N          | Y        |          |
| additional_info                | varchar      |          | N        | N        | N          | N        |          |
| client_id                      | varchar      | 255      | N        | N        | N          | N        |          |
| client_secret                  | varchar      | 255      | N        | N        | N          | N        |          |
| authorization_uri              | varchar      | 255      | N        | N        | N          | N        |          |
| token_uri                      | varchar      | 255      | N        | N        | N          | N        |          |
| scope                          | varchar      | 255      | N        | N        | N          | N        |          |
| user_info_uri                  | varchar      | 255      | N        | N        | N          | N        |          |
| user_name_attribute_name       | varchar      | 255      | N        | N        | N          | N        |          |
| jwk_set_uri                    | varchar      | 255      | N        | N        | N          | N        |          |
| client_authentication_method   | varchar      | 255      | N        | N        | N          | N        |          |
| login_button_label             | varchar      | 255      | N        | N        | N          | N        |          |
| login_button_icon              | varchar      | 255      | N        | N        | N          | N        |          |
| allow_user_creation            | bool         |          | N        | N        | N          | N        |          |
| activate_user                  | bool         |          | N        | N        | N          | N        |          |
| type                           | varchar      | 31       | N        | N        | N          | N        |          |
| basic_email_attribute_key      | varchar      | 31       | N        | N        | N          | N        |          |
| basic_first_name_attribute_key | varchar      | 31       | N        | N        | N          | N        |          |
| basic_last_name_attribute_key  | varchar      | 31       | N        | N        | N          | N        |          |
| basic_tenant_name_strategy     | varchar      | 31       | N        | N        | N          | N        |          |
| basic_tenant_name_pattern      | varchar      | 255      | N        | N        | N          | N        |          |
| basic_customer_name_pattern    | varchar      | 255      | N        | N        | N          | N        |          |
| basic_default_dashboard_name   | varchar      | 255      | N        | N        | N          | N        |          |
| basic_always_full_screen       | bool         |          | N        | N        | N          | N        |          |
| custom_url                     | varchar      | 255      | N        | N        | N          | N        |          |
| custom_username                | varchar      | 255      | N        | N        | N          | N        |          |
| custom_password                | varchar      | 255      | N        | N        | N          | N        |          |
| custom_send_token              | bool         |          | N        | N        | N          | N        |          |

## 表20 oauth2_client_registration_template
 
| **字段名**                     | **字段类型** | **长度** | **主键** | **外键** | **唯一键** | **非空** | **说明** |
| ------------------------------ | ------------ | -------- | -------- | -------- | ---------- | -------- | -------- |
| id                             | uuid         |          | Y        | N        | N          | Y        |          |
| created_time                   | int8         | 64       | N        | N        | N          | Y        |          |
| additional_info                | varchar      |          | N        | N        | N          | N        |          |
| provider_id                    | varchar      | 255      | N        | N        | Y          | N        |          |
| authorization_uri              | varchar      | 255      | N        | N        | N          | N        |          |
| token_uri                      | varchar      | 255      | N        | N        | N          | N        |          |
| scope                          | varchar      | 255      | N        | N        | N          | N        |          |
| user_info_uri                  | varchar      | 255      | N        | N        | N          | N        |          |
| user_name_attribute_name       | varchar      | 255      | N        | N        | N          | N        |          |
| jwk_set_uri                    | varchar      | 255      | N        | N        | N          | N        |          |
| client_authentication_method   | varchar      | 255      | N        | N        | N          | N        |          |
| type                           | varchar      | 31       | N        | N        | N          | N        |          |
| basic_email_attribute_key      | varchar      | 31       | N        | N        | N          | N        |          |
| basic_first_name_attribute_key | varchar      | 31       | N        | N        | N          | N        |          |
| basic_last_name_attribute_key  | varchar      | 31       | N        | N        | N          | N        |          |
| basic_tenant_name_strategy     | varchar      | 31       | N        | N        | N          | N        |          |
| basic_tenant_name_pattern      | varchar      | 255      | N        | N        | N          | N        |          |
| basic_customer_name_pattern    | varchar      | 255      | N        | N        | N          | N        |          |
| basic_default_dashboard_name   | varchar      | 255      | N        | N        | N          | N        |          |
| basic_always_full_screen       | bool         |          | N        | N        | N          | N        |          |
| comment                        | varchar      |          | N        | N        | N          | N        |          |
| login_button_icon              | varchar      | 255      | N        | N        | N          | N        |          |
| login_button_label             | varchar      | 255      | N        | N        | N          | N        |          |
| help_link                      | varchar      | 255      | N        | N        | N          | N        |          |

## 表21 oauth2_domain 

| **字段名**       | **字段类型** | **长度** | **主键** | **外键** | **唯一键** | **非空** | **说明** |
| ---------------- | ------------ | -------- | -------- | -------- | ---------- | -------- | -------- |
| id               | uuid         |          | Y        | N        | N          | Y        |          |
| oauth2_params_id | uuid         |          | N        | Y        | Y          | Y        |          |
| created_time     | int8         | 64       | N        | N        | N          | Y        |          |
| domain_name      | varchar      | 255      | N        | N        | N          | N        |          |
| domain_scheme    | varchar      | 31       | N        | N        | N          | N        |          |

## 表22 oauth2_mobile 

| **字段名**       | **字段类型** | **长度** | **主键** | **外键** | **唯一键** | **非空** | **说明** |
| ---------------- | ------------ | -------- | -------- | -------- | ---------- | -------- | -------- |
| id               | uuid         |          | Y        | N        | N          | Y        |          |
| oauth2_params_id | uuid         |          | N        | Y        | Y          | Y        |          |
| created_time     | int8         | 64       | N        | N        | N          | Y        |          |
| pkg_name         | varchar      | 255      | N        | N        | N          | N        |          |
| app_secret       | varchar      | 2048     | N        | N        | N          | N        |          |

## 表23 oauth2_params

| **字段名**   | **字段类型** | **长度** | **主键** | **外键** | **唯一键** | **非空** | **说明** |
| ------------ | ------------ | -------- | -------- | -------- | ---------- | -------- | -------- |
| id           | uuid         |          | Y        | N        | N          | Y        |          |
| enabled      | bool         |          | N        | N        | N          | N        |          |
| tenant_id    | uuid         |          | N        | N        | N          | N        |          |
| created_time | int8         | 64       | N        | N        | N          | Y        |          |

## 表24 oauth2_registration 

| **字段名**                     | **字段类型** | **长度** | **主键** | **外键** | **唯一键** | **非空** | **说明** |
| ------------------------------ | ------------ | -------- | -------- | -------- | ---------- | -------- | -------- |
| id                             | uuid         |          | Y        | N        | N          | Y        |          |
| oauth2_params_id               | uuid         |          | N        | Y        | N          | Y        |          |
| created_time                   | int8         | 64       | N        | N        | N          | Y        |          |
| additional_info                | varchar      |          | N        | N        | N          | N        |          |
| client_id                      | varchar      | 255      | N        | N        | N          | N        |          |
| client_secret                  | varchar      | 2048     | N        | N        | N          | N        |          |
| authorization_uri              | varchar      | 255      | N        | N        | N          | N        |          |
| token_uri                      | varchar      | 255      | N        | N        | N          | N        |          |
| scope                          | varchar      | 255      | N        | N        | N          | N        |          |
| platforms                      | varchar      | 255      | N        | N        | N          | N        |          |
| user_info_uri                  | varchar      | 255      | N        | N        | N          | N        |          |
| user_name_attribute_name       | varchar      | 255      | N        | N        | N          | N        |          |
| jwk_set_uri                    | varchar      | 255      | N        | N        | N          | N        |          |
| client_authentication_method   | varchar      | 255      | N        | N        | N          | N        |          |
| login_button_label             | varchar      | 255      | N        | N        | N          | N        |          |
| login_button_icon              | varchar      | 255      | N        | N        | N          | N        |          |
| allow_user_creation            | bool         |          | N        | N        | N          | N        |          |
| activate_user                  | bool         |          | N        | N        | N          | N        |          |
| type                           | varchar      | 31       | N        | N        | N          | N        |          |
| basic_email_attribute_key      | varchar      | 31       | N        | N        | N          | N        |          |
| basic_first_name_attribute_key | varchar      | 31       | N        | N        | N          | N        |          |
| basic_last_name_attribute_key  | varchar      | 31       | N        | N        | N          | N        |          |
| basic_tenant_name_strategy     | varchar      | 31       | N        | N        | N          | N        |          |
| basic_tenant_name_pattern      | varchar      | 255      | N        | N        | N          | N        |          |
| basic_customer_name_pattern    | varchar      | 255      | N        | N        | N          | N        |          |
| basic_default_dashboard_name   | varchar      | 255      | N        | N        | N          | N        |          |
| basic_always_full_screen       | bool         |          | N        | N        | N          | N        |          |
| custom_url                     | varchar      | 255      | N        | N        | N          | N        |          |
| custom_username                | varchar      | 255      | N        | N        | N          | N        |          |
| custom_password                | varchar      | 255      | N        | N        | N          | N        |          |
| custom_send_token              | bool         |          | N        | N        | N          | N        |          |
